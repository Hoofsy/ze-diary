# å·¥ä½œæµåç§°ï¼šè‡ªåŠ¨ç»Ÿè®¡ ZE ç™½ç»™æ¬¡æ•°
name: è‡ªåŠ¨ç»Ÿè®¡ç™½ç»™æ¬¡æ•°

# è§¦å‘æ¡ä»¶ï¼šå½“ ze-diary/ç™½ç»™è®°å½•/ ä¸‹çš„æ—¥æœŸæ–‡ä»¶æˆ– README è¢«ä¿®æ”¹æ—¶è¿è¡Œ
on:
  push:
    branches: [ main, master ]  # å…¼å®¹ GitHub æ–°è€ä»“åº“çš„é»˜è®¤åˆ†æ”¯ï¼ˆmain/masterï¼‰
    paths:
      - "ç™½ç»™è®°å½•/*.md"  # åªç›‘å¬æ—¥æœŸæ–‡ä»¶çš„å˜åŒ–
      - "README.md"               # å¯é€‰ï¼šå¦‚æœæ”¹ README ä¹Ÿæƒ³è§¦å‘ï¼Œå°±ä¿ç•™

# è¿è¡Œä»»åŠ¡
jobs:
  count_fail_times:
    runs-on: ubuntu-latest  # ä½¿ç”¨ GitHub æä¾›çš„å…è´¹ Ubuntu æœåŠ¡å™¨
    steps:
      # ç¬¬ä¸€æ­¥ï¼šæŠŠä»“åº“ä»£ç æ‹‰åˆ°æœåŠ¡å™¨ä¸Š
      - name: æ‹‰å–ä»“åº“ä»£ç 
        uses: actions/checkout@v4
        with:
          fetch-depth: 0  # æ‹‰å–å®Œæ•´å†å²ï¼Œç¡®ä¿èƒ½æäº¤æ›´æ–°

      # ç¬¬äºŒæ­¥ï¼šè¿è¡Œç»Ÿè®¡è„šæœ¬ï¼ˆPython ç¯å¢ƒå·²é¢„è£…ï¼‰
      - name: è¿è¡Œç™½ç»™æ¬¡æ•°ç»Ÿè®¡è„šæœ¬
        run: python count_fail.py

      # ç¬¬ä¸‰æ­¥ï¼šè‡ªåŠ¨æäº¤ README çš„æ›´æ–°ï¼ˆå¦‚æœæœ‰å˜åŒ–ï¼‰
      - name: è‡ªåŠ¨æäº¤æ›´æ–°åˆ° README
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "ğŸ¤– è‡ªåŠ¨æ›´æ–°æ€»ç™½ç»™æ¬¡æ•°"  # æäº¤å¤‡æ³¨ï¼Œå¯è‡ªå®šä¹‰
          file_pattern: "README.md"                # åªæäº¤ README çš„ä¿®æ”¹
          commit_user_name: "GitHub Actions"      # æäº¤è€…åå­—ï¼ˆå›ºå®šï¼‰
          commit_user_email: "actions@github.com" # æäº¤è€…é‚®ç®±ï¼ˆå›ºå®šï¼‰
